@model BEINN.Models.NotificationDetails
@using Microsoft.AspNetCore.Http
@using Newtonsoft.Json
@using BEINN.Models
@inject IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = "Notificación";
}




@{
    var header = new HeaderViewModel
    {
        Title = "Notificación",
        IconPath = "notificaciones.png",
        Description = "Contenido de tu notificación.",
        Section = "Gobernanza y Seguridad",
        ModuleInfo = JsonConvert.SerializeObject(new
        {
            title = "Notificación",
            description = "Muestra el contenido de una notificación en específico.",
            functionality = "Muestra notificaciones para revisar",
            stage = "Inicialización",
            roles = new[] {
                new { icon = "building", text = "Secretaría de Energía: Administración general" },
                new { icon = "users-cog", text = "Unidad SNIEr: Revisión de notificaciones" },
                new { icon = "user-shield", text = "Dirección TICs: Control técnico" },
                new { icon = "user-tie", text = "Consejo: Supervisión de accesos" }
            },
            order = new { step = 1, description = "Control de accesos desde el inicio (Art. 70)" }
        }),
        LegalDescription = "Revisión de notificaciones.",
        Fundamentos = new List<FundamentoLegal> {
            new() { Reference = "Art. 70 Reglamento", Description = "Establece los controles de acceso y gestión de usuarios" },
            new() { Reference = "Art. 71 Reglamento", Description = "Define la administración de perfiles" },
            new() { Reference = "Art. 76 Reglamento", Description = "Establece la trazabilidad y seguridad" }
        }
    };
}

@await Html.PartialAsync("_ViewHeader", header);

<div class="container container ps-5 pe-5">
    <h2 class="subtitulo pt-3"> <img src="@Cdn.Url/img_snier/vistas/notificaciones.png" alt="Icono personalizado" class="iconomenu">@Model.Titulo</h2>
    <br>
    @* Imagen destacada de la notificación *@
    @if (!string.IsNullOrEmpty(Model.Imagen))
    {
        <div class="text-center mb-4">
            <img src="@Model.Imagen" alt="Imagen de notificación" 
                 class="img-fluid rounded shadow-sm" 
                 style="max-width: 600px; height: auto;" />
        </div>
    }
    <div class="alert alert-success fade show" role="alert">
        <p class="text-justify">@Model.Mensaje</p>
        @if (!string.IsNullOrEmpty(Model.Link))
        {
            <p><a href="@Model.Link" target="_blank">Consulta la página y/o documento</a></p>
        } 
    </div>
    <br>
    <p><strong>Fecha:</strong> @Model.Fecha.ToString("dd/MM/yyyy HH:mm")</p>
    <a href="@Url.Action("Index", "Home")" class="btn btn-primary">Volver</a>
    <br>
</div>



<!-- Scripts -->
@section scripts {



}